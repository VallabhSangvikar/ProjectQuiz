<% layout("layouts/boilerplate")%>
<style>
    main {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
  background-color: #f9f9f9;
  border-radius: 10px;
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
}

.quiz-section {
  background-color: #fff;
  padding: 30px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

#quiz-title {
  font-size: 28px;
  font-weight: bold;
  text-align: center;
  margin-bottom: 20px;
  color: #0077b6;
}

#quiz-description {
  text-align: center;
  margin-bottom: 30px;
  color: #555;
}

.question-navigation {
  display: flex;
  justify-content: center;
  margin-bottom: 30px;
}

.question-navigation button {
  margin: 0 5px;
  padding: 8px 15px;
  background-color: #0077b6;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.question-navigation button:hover {
  background-color: #005d8c;
}

.question-navigation button.navbtn {
  background-color: #ccc;
  color: #333;
}

.question-navigation button.navbtn.active {
  background-color: #0077b6;
  color: #fff;
}

#quiz-container h2 {
  font-size: 20px;
  font-weight: bold;
  margin-bottom: 15px;
  color: #333;
}

#questiontitle {
  font-size: 18px;
  margin-bottom: 20px;
  color: #555;
}

.options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-gap: 20px;
  margin-bottom: 30px;
}

.option {
  display: flex;
  align-items: center;
  padding: 15px;
  border: 1px solid #ddd;
  border-radius: 5px;
  background-color:white;
  transition: background-color 0.3s ease;
}


.option:hover {
  background-color: #f2f2f2;
}

.option input[type="radio"] {
  margin-right: 10px;
}

#result {
  text-align: center;
  margin-top: 30px;
}

#result #score {
  font-size: 20px;
  font-weight: bold;
  margin-bottom: 15px;
  color: #0077b6;
}

#result #restart-btn {
  padding: 12px 25px;
  background-color: #0077b6;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

#result #restart-btn:hover {
  background-color: #005d8c;
}
</style>

<body>
    <main>
        <section class="quiz-section">
          <h2 id="quiz-title">Quiz Title:  </h2>
          <p id="quiz-description">Quiz Description:</p>
          <div class="question-navigation">
            <!-- Question navigation buttons will be dynamically added here -->
          </div>
          <div id="quiz-container">
            <h2>Question</h2>
            <!-- Quiz questions will be dynamically added here -->
            <h3 id="questiontitle"></h3>
            <br>
            <h4>Options</h4>
            <div class="options">
              <div class="option">
                <input type="radio" name="options" id="option1" value="option1">
                <label for="option1" id="labelopt1"></label>
              </div>
              <div class="option">
                <input type="radio" name="options" id="option2" value="option2">
                <label for="option2" id="labelopt2"></label>
              </div>
              <div class="option">
                <input type="radio" name="options" id="option3" value="option3">
                <label for="option3" id="labelopt3"></label>
              </div>
              <div class="option">
                <input type="radio" name="options" id="option4" value="option4">
                <label for="option4" id="labelopt4"></label>
              </div>
            </div>
            <div class="question-navigation">
              <button id="savenextbtn">Save & Next</button>  
              <button id="previousbtn">Previous</button>
            </div>
          </div>
          <div id="result" class="hidden">
            <p id="score"></p>
            <button id="restart-btn">Restart Quiz</button>
          </div>
        </section>
      </main>
</body>
<script>
     // JavaScript code...
    //bringing the title dynamically
    let quiztitle = document.getElementById("quiz-title").innerText;
    let newtitle = "test1";
    let addtitle = quiztitle + newtitle;
    document.getElementById("quiz-title").innerText = addtitle;

    //bringing the questions dynamically
    var questions = [
      {
        question: "What is the capital city of France?",
        options: ["Paris", "Rome", "Berlin", "London"],
        answer: "Paris"
      },
      {
        question: "The Earth revolves around the Moon.",
        options: ["true", "false", "all of the above", "none of the above"],
        answer: "false"
      },
      {
        question: "Who wrote 'Romeo and Juliet'?",
        options: ["William Shakespeare", "Charles Dickens", "Jane Austen", "F. Scott Fitzgerald"],
        answer: "William Shakespeare"
      },
      {
        question: "What is the chemical symbol for water?",
        options: ["H2O", "CO2", "NaCl", "O2"],
        answer: "H2O"
      },
      {
        question: "Which planet is known as the Red Planet?",
        options: ["Mars", "Venus", "Jupiter", "Mercury"],
        answer: "Mars"
      },
      {
        question: "Who discovered gravity?",
        options: ["Isaac Newton", "Albert Einstein", "Galileo Galilei", "Nikola Tesla"],
        answer: "Isaac Newton"
      },
      {
        question: "What is the largest mammal in the world?",
        options: ["Blue Whale", "Elephant", "Giraffe", "Hippopotamus"],
        answer: "Blue Whale"
      },
      {
        question: "Which country is famous for the Taj Mahal?",
        options: ["India", "China", "Egypt", "Japan"],
        answer: "India"
      },
      {
        question: "Who painted the Mona Lisa?",
        options: ["Leonardo da Vinci", "Pablo Picasso", "Vincent van Gogh", "Michelangelo"],
        answer: "Leonardo da Vinci"
      },
      {
        question: "What is the chemical symbol for gold?",
        options: ["Au", "Ag", "Pb", "Fe"],
        answer: "Au"
      }
    ];

    let QuestionShow = document.getElementById("questiontitle");
    let opt1 = document.getElementById("labelopt1");
    let opt2 = document.getElementById("labelopt2");
    let opt3 = document.getElementById("labelopt3");
    let opt4 = document.getElementById("labelopt4");
    let savenextbtn = document.getElementById("savenextbtn");
    let previousbtn = document.getElementById("previousbtn");
    let radiobuttons = document.querySelectorAll('input[type="radio"]');
    let quenobtn = document.querySelector(".question-navigation");
    let options = document.querySelectorAll('.option');
     
    for (let i = 0; i < questions.length; i++) {
      let newbtn = document.createElement("button");
      newbtn.innerText = i + 1;
      newbtn.classList.add('navbtn');
      newbtn.addEventListener("click", () => {
        queindex = i;
        displayQuestionAndOptions(queindex);
        updateRadioButtons();
        
     });
      quenobtn.append(newbtn);
      // buttons.push(newbtn);
    }
    let buttons=document.querySelectorAll('.navbtn');

    function changeColor(i){
      buttons.forEach(button =>{
        button.style.backgroundColor="";
      })
      buttons[i].style.backgroundColor="red";
      
    }


    function displayQuestionAndOptions(questionIndex) {
      QuestionShow.textContent = questions[questionIndex].question;
      opt1.textContent = questions[questionIndex].options[0];
      opt2.textContent = questions[questionIndex].options[1];
      opt3.textContent = questions[questionIndex].options[2];
      opt4.textContent = questions[questionIndex].options[3];
      changeColor(questionIndex);
    }

    function updateRadioButtons() {
      radiobuttons.forEach(function(radioButton) {
        if (selectedOptions[queindex] === radioButton.value) {
          radioButton.checked = true;
        } else {
          radioButton.checked = false;
        }
      });
    }
    let queindex = 0;
    displayQuestionAndOptions(queindex);


   

    savenextbtn.addEventListener("click", () => {
      if (queindex !== questions.length - 1) {
        queindex++;
        displayQuestionAndOptions(queindex);
        updateRadioButtons();
      } else {
        queindex = 0;
        displayQuestionAndOptions(queindex);
        updateRadioButtons();
      }
      radiobuttons.forEach(radioButton => {
        radioButton.checked = false;
      });
      updateRadioButtons();
    }
  );

    previousbtn.addEventListener("click", () => {
      if (queindex !== 0) {
        queindex--;
        displayQuestionAndOptions(queindex);
        updateRadioButtons();}
        else{
            queindex = questions.length;
            displayQuestionAndOptions();
            updateRadioButtons();
            
        }
        
      }
    );

    radiobuttons.forEach(radiobtn => {
      radiobtn.addEventListener("click", () => {
        console.log("radiobutton was clicked:", radiobtn.value);
      });
    });

    let selectedOptions = [];
    radiobuttons.forEach(radiobtn => {
      radiobtn.addEventListener("click", () => {
        selectedOptions[queindex] = radiobtn.value;
      });
    });


    for(let i=0;i<4;i++){
      options[i].addEventListener('click',()=>{
        radiobuttons[i].checked=true;
        selectedOptions[queindex] = radiobuttons[i].value;
        console.log("radiobutton was clicked:", radiobuttons[i].value);
      })
    }
    updateRadioButtons();
</script>
